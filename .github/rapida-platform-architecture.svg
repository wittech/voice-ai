<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1920 1080" width="1920" height="1080" font-family="system-ui, -apple-system, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif">
  <defs>
    <!-- Drop shadow filter -->
    <filter id="shadow" x="-2%" y="-2%" width="104%" height="104%">
      <feDropShadow dx="0" dy="2" stdDeviation="3" flood-color="#00000015"/>
    </filter>
    <filter id="shadow-lg" x="-3%" y="-3%" width="106%" height="106%">
      <feDropShadow dx="0" dy="3" stdDeviation="5" flood-color="#00000020"/>
    </filter>
    <!-- Arrow marker -->
    <marker id="arrow-gray" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L8,3 L0,6 Z" fill="#94A3B8"/>
    </marker>
    <marker id="arrow-blue" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L8,3 L0,6 Z" fill="#3B82F6"/>
    </marker>
    <marker id="arrow-purple" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L8,3 L0,6 Z" fill="#8B5CF6"/>
    </marker>
    <marker id="arrow-slate" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L8,3 L0,6 Z" fill="#64748B"/>
    </marker>
    <!-- Gradient for title -->
    <linearGradient id="title-gradient" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#3B82F6"/>
      <stop offset="100%" style="stop-color:#8B5CF6"/>
    </linearGradient>
  </defs>

  <!-- Background -->
  <rect width="1920" height="1080" fill="#FFFFFF"/>

  <!-- ==================== TITLE ==================== -->
  <text x="960" y="38" text-anchor="middle" font-size="22" font-weight="700" fill="url(#title-gradient)">Rapida Voice AI Platform â€” Technical Architecture</text>
  <line x1="700" y1="48" x2="1220" y2="48" stroke="#E2E8F0" stroke-width="1"/>

  <!-- ==================== ZONE LABELS ==================== -->
  <text x="88" y="72" text-anchor="middle" font-size="10" font-weight="600" fill="#94A3B8" letter-spacing="1.5">CLIENTS</text>
  <text x="258" y="72" text-anchor="middle" font-size="10" font-weight="600" fill="#94A3B8" letter-spacing="1.5">GATEWAY</text>
  <text x="700" y="72" text-anchor="middle" font-size="10" font-weight="600" fill="#94A3B8" letter-spacing="1.5">CORE SERVICES</text>
  <text x="1340" y="72" text-anchor="middle" font-size="10" font-weight="600" fill="#94A3B8" letter-spacing="1.5">INFRASTRUCTURE</text>
  <text x="1680" y="72" text-anchor="middle" font-size="10" font-weight="600" fill="#94A3B8" letter-spacing="1.5">EXTERNAL INTEGRATIONS</text>

  <!-- ==================== CLIENTS & SDKs (Left Zone) ==================== -->
  <rect x="16" y="84" width="145" height="640" rx="10" fill="#F8FAFC" stroke="#E2E8F0" stroke-width="1"/>

  <!-- Browser / React UI -->
  <rect x="28" y="100" width="120" height="52" rx="8" fill="#FFFFFF" stroke="#06B6D4" stroke-width="1.5" filter="url(#shadow)"/>
  <text x="88" y="122" text-anchor="middle" font-size="11" font-weight="600" fill="#0E7490">React UI</text>
  <text x="88" y="137" text-anchor="middle" font-size="9" fill="#64748B">:3000</text>

  <!-- Go SDK -->
  <rect x="28" y="168" width="120" height="44" rx="8" fill="#FFFFFF" stroke="#3B82F6" stroke-width="1.5" filter="url(#shadow)"/>
  <text x="88" y="186" text-anchor="middle" font-size="11" font-weight="600" fill="#1D4ED8">Go SDK</text>
  <text x="88" y="200" text-anchor="middle" font-size="8" fill="#94A3B8">gRPC</text>

  <!-- Node.js SDK -->
  <rect x="28" y="226" width="120" height="44" rx="8" fill="#FFFFFF" stroke="#3B82F6" stroke-width="1.5" filter="url(#shadow)"/>
  <text x="88" y="244" text-anchor="middle" font-size="11" font-weight="600" fill="#1D4ED8">Node.js SDK</text>
  <text x="88" y="258" text-anchor="middle" font-size="8" fill="#94A3B8">REST / gRPC</text>

  <!-- Python SDK -->
  <rect x="28" y="284" width="120" height="44" rx="8" fill="#FFFFFF" stroke="#10B981" stroke-width="1.5" filter="url(#shadow)"/>
  <text x="88" y="302" text-anchor="middle" font-size="11" font-weight="600" fill="#047857">Python SDK</text>
  <text x="88" y="316" text-anchor="middle" font-size="8" fill="#94A3B8">REST / gRPC</text>

  <!-- React SDK -->
  <rect x="28" y="342" width="120" height="52" rx="8" fill="#FFFFFF" stroke="#06B6D4" stroke-width="1.5" filter="url(#shadow)"/>
  <text x="88" y="362" text-anchor="middle" font-size="11" font-weight="600" fill="#0E7490">React SDK</text>
  <text x="88" y="378" text-anchor="middle" font-size="8" fill="#94A3B8">WebRTC / gRPC-Web</text>

  <!-- Phone / PSTN -->
  <rect x="28" y="418" width="120" height="52" rx="8" fill="#FFFFFF" stroke="#F59E0B" stroke-width="1.5" filter="url(#shadow)"/>
  <text x="88" y="438" text-anchor="middle" font-size="11" font-weight="600" fill="#B45309">Phone / PSTN</text>
  <text x="88" y="454" text-anchor="middle" font-size="8" fill="#94A3B8">SIP Trunk</text>

  <!-- Asterisk PBX -->
  <rect x="28" y="486" width="120" height="52" rx="8" fill="#FFFFFF" stroke="#F59E0B" stroke-width="1.5" filter="url(#shadow)"/>
  <text x="88" y="506" text-anchor="middle" font-size="11" font-weight="600" fill="#B45309">Asterisk PBX</text>
  <text x="88" y="522" text-anchor="middle" font-size="8" fill="#94A3B8">AudioSocket</text>

  <!-- WhatsApp -->
  <rect x="28" y="554" width="120" height="52" rx="8" fill="#FFFFFF" stroke="#22C55E" stroke-width="1.5" filter="url(#shadow)"/>
  <text x="88" y="574" text-anchor="middle" font-size="11" font-weight="600" fill="#15803D">WhatsApp</text>
  <text x="88" y="590" text-anchor="middle" font-size="8" fill="#94A3B8">Messaging API</text>

  <!-- Web Plugin -->
  <rect x="28" y="622" width="120" height="52" rx="8" fill="#FFFFFF" stroke="#06B6D4" stroke-width="1.5" filter="url(#shadow)"/>
  <text x="88" y="642" text-anchor="middle" font-size="11" font-weight="600" fill="#0E7490">Web Plugin</text>
  <text x="88" y="658" text-anchor="middle" font-size="8" fill="#94A3B8">Embed Widget</text>

  <!-- ==================== GATEWAY (Nginx) ==================== -->
  <rect x="194" y="84" width="128" height="270" rx="10" fill="#F8FAFC" stroke="#E2E8F0" stroke-width="1"/>
  <rect x="206" y="100" width="104" height="240" rx="8" fill="#FFFFFF" stroke="#64748B" stroke-width="1.5" filter="url(#shadow)"/>
  <text x="258" y="122" text-anchor="middle" font-size="12" font-weight="700" fill="#334155">Nginx</text>
  <text x="258" y="138" text-anchor="middle" font-size="9" fill="#64748B">:8080</text>
  <line x1="218" y1="148" x2="298" y2="148" stroke="#E2E8F0" stroke-width="1"/>
  <text x="258" y="166" text-anchor="middle" font-size="9" fill="#64748B">Reverse Proxy</text>
  <text x="258" y="184" text-anchor="middle" font-size="8.5" fill="#94A3B8">REST â†’ web-api</text>
  <text x="258" y="200" text-anchor="middle" font-size="8.5" fill="#94A3B8">WS â†’ assistant-api</text>
  <text x="258" y="216" text-anchor="middle" font-size="8.5" fill="#94A3B8">gRPC-Web routing</text>
  <text x="258" y="232" text-anchor="middle" font-size="8.5" fill="#94A3B8">WebRTC upgrade</text>
  <text x="258" y="248" text-anchor="middle" font-size="8.5" fill="#94A3B8">TLS termination</text>
  <text x="258" y="268" text-anchor="middle" font-size="8.5" fill="#94A3B8">Static UI assets</text>
  <text x="258" y="288" text-anchor="middle" font-size="8.5" fill="#94A3B8">CORS handling</text>

  <!-- ==================== CORE SERVICES (Center) ==================== -->
  <rect x="350" y="84" width="700" height="640" rx="10" fill="#F8FAFC" stroke="#E2E8F0" stroke-width="1"/>

  <!-- web-api -->
  <rect x="366" y="100" width="194" height="170" rx="8" fill="#FFFFFF" stroke="#3B82F6" stroke-width="1.5" filter="url(#shadow)"/>
  <rect x="366" y="100" width="194" height="30" rx="8" fill="#EFF6FF"/>
  <rect x="366" y="118" width="194" height="12" fill="#EFF6FF"/>
  <text x="463" y="120" text-anchor="middle" font-size="12" font-weight="700" fill="#1D4ED8">web-api</text>
  <text x="463" y="136" text-anchor="middle" font-size="9" fill="#3B82F6">Go Â· :9001</text>
  <line x1="378" y1="145" x2="548" y2="145" stroke="#E2E8F0" stroke-width="1"/>
  <text x="382" y="162" font-size="9" fill="#475569">â€¢ Authentication &amp; JWT</text>
  <text x="382" y="177" font-size="9" fill="#475569">â€¢ OAuth Providers</text>
  <text x="382" y="192" font-size="9" fill="#475569">â€¢ Organizations &amp; Projects</text>
  <text x="382" y="207" font-size="9" fill="#475569">â€¢ Vault (Credentials)</text>
  <text x="382" y="222" font-size="9" fill="#475569">â€¢ Proxy to Services</text>
  <text x="382" y="237" font-size="9" fill="#475569">â€¢ User Management</text>
  <text x="382" y="252" font-size="9" fill="#475569">â€¢ Notifications</text>
  <text x="382" y="262" font-size="8" fill="#3B82F6">cmux: HTTP/2 + gRPC-Web + HTTP</text>

  <!-- integration-api -->
  <rect x="366" y="290" width="194" height="170" rx="8" fill="#FFFFFF" stroke="#3B82F6" stroke-width="1.5" filter="url(#shadow)"/>
  <rect x="366" y="290" width="194" height="30" rx="8" fill="#EFF6FF"/>
  <rect x="366" y="308" width="194" height="12" fill="#EFF6FF"/>
  <text x="463" y="310" text-anchor="middle" font-size="12" font-weight="700" fill="#1D4ED8">integration-api</text>
  <text x="463" y="326" text-anchor="middle" font-size="9" fill="#3B82F6">Go Â· :9004</text>
  <line x1="378" y1="335" x2="548" y2="335" stroke="#E2E8F0" stroke-width="1"/>
  <text x="382" y="352" font-size="9" fill="#475569">â€¢ LLM Chat Completion</text>
  <text x="382" y="367" font-size="9" fill="#475569">â€¢ Text Embedding</text>
  <text x="382" y="382" font-size="9" fill="#475569">â€¢ Reranking</text>
  <text x="382" y="397" font-size="9" fill="#475569">â€¢ Provider Abstraction</text>
  <text x="382" y="412" font-size="9" fill="#475569">â€¢ Streaming Responses</text>
  <text x="382" y="427" font-size="9" fill="#475569">â€¢ Audit Logging</text>
  <text x="382" y="442" font-size="9" fill="#475569">â€¢ API Key Rotation</text>
  <text x="382" y="452" font-size="8" fill="#3B82F6">cmux: HTTP/2 + gRPC-Web + HTTP</text>

  <!-- endpoint-api -->
  <rect x="366" y="480" width="194" height="140" rx="8" fill="#FFFFFF" stroke="#3B82F6" stroke-width="1.5" filter="url(#shadow)"/>
  <rect x="366" y="480" width="194" height="30" rx="8" fill="#EFF6FF"/>
  <rect x="366" y="498" width="194" height="12" fill="#EFF6FF"/>
  <text x="463" y="500" text-anchor="middle" font-size="12" font-weight="700" fill="#1D4ED8">endpoint-api</text>
  <text x="463" y="516" text-anchor="middle" font-size="9" fill="#3B82F6">Go Â· :9005</text>
  <line x1="378" y1="525" x2="548" y2="525" stroke="#E2E8F0" stroke-width="1"/>
  <text x="382" y="542" font-size="9" fill="#475569">â€¢ Endpoint CRUD</text>
  <text x="382" y="557" font-size="9" fill="#475569">â€¢ HTTP Invocation</text>
  <text x="382" y="572" font-size="9" fill="#475569">â€¢ Response Caching</text>
  <text x="382" y="587" font-size="9" fill="#475569">â€¢ Retry Configuration</text>
  <text x="382" y="602" font-size="9" fill="#475569">â€¢ Execution Logging</text>
  <text x="382" y="612" font-size="8" fill="#3B82F6">cmux: HTTP/2 + gRPC-Web + HTTP</text>

  <!-- document-api -->
  <rect x="366" y="640" width="194" height="74" rx="8" fill="#FFFFFF" stroke="#10B981" stroke-width="1.5" filter="url(#shadow)"/>
  <rect x="366" y="640" width="194" height="28" rx="8" fill="#ECFDF5"/>
  <rect x="366" y="656" width="194" height="12" fill="#ECFDF5"/>
  <text x="463" y="658" text-anchor="middle" font-size="12" font-weight="700" fill="#047857">document-api</text>
  <text x="463" y="674" text-anchor="middle" font-size="9" fill="#10B981">Python Â· FastAPI Â· :9010</text>
  <line x1="378" y1="682" x2="548" y2="682" stroke="#E2E8F0" stroke-width="1"/>
  <text x="382" y="698" font-size="9" fill="#475569">â€¢ Chunking Â· Embedding Â· RAG Â· Celery</text>

  <!-- ==================== ASSISTANT-API (Expanded Box) ==================== -->
  <rect x="580" y="100" width="456" height="614" rx="10" fill="#FFFFFF" stroke="#3B82F6" stroke-width="2" filter="url(#shadow-lg)"/>
  <rect x="580" y="100" width="456" height="36" rx="10" fill="#EFF6FF"/>
  <rect x="580" y="124" width="456" height="12" fill="#EFF6FF"/>
  <text x="808" y="124" text-anchor="middle" font-size="14" font-weight="700" fill="#1D4ED8">assistant-api</text>
  <text x="808" y="144" text-anchor="middle" font-size="10" fill="#3B82F6">Go Â· :9007 (HTTP/gRPC/WebRTC) Â· :5090 (SIP) Â· :4573 (AudioSocket)</text>

  <!-- cmux Multiplexer -->
  <rect x="596" y="158" width="424" height="32" rx="6" fill="#F1F5F9" stroke="#CBD5E1" stroke-width="1"/>
  <text x="808" y="178" text-anchor="middle" font-size="10" font-weight="600" fill="#475569">cmux Protocol Multiplexer â€” HTTP/2 (gRPC) Â· gRPC-Web (WebSocket) Â· HTTP/1.1 (REST)</text>

  <!-- Voice Pipeline Label -->
  <text x="808" y="210" text-anchor="middle" font-size="10" font-weight="600" fill="#6366F1" letter-spacing="1">VOICE PIPELINE</text>

  <!-- Row 1: Channels -->
  <rect x="596" y="220" width="100" height="48" rx="6" fill="#FFF7ED" stroke="#FB923C" stroke-width="1"/>
  <text x="646" y="240" text-anchor="middle" font-size="9" font-weight="600" fill="#C2410C">WebRTC</text>
  <text x="646" y="254" text-anchor="middle" font-size="8" fill="#94A3B8">Channel</text>

  <rect x="704" y="220" width="100" height="48" rx="6" fill="#FFF7ED" stroke="#FB923C" stroke-width="1"/>
  <text x="754" y="240" text-anchor="middle" font-size="9" font-weight="600" fill="#C2410C">gRPC</text>
  <text x="754" y="254" text-anchor="middle" font-size="8" fill="#94A3B8">Channel</text>

  <rect x="812" y="220" width="100" height="48" rx="6" fill="#FFF7ED" stroke="#FB923C" stroke-width="1"/>
  <text x="862" y="240" text-anchor="middle" font-size="9" font-weight="600" fill="#C2410C">Telephony</text>
  <text x="862" y="254" text-anchor="middle" font-size="8" fill="#94A3B8">SIP/RTP</text>

  <rect x="920" y="220" width="100" height="48" rx="6" fill="#FFF7ED" stroke="#FB923C" stroke-width="1"/>
  <text x="970" y="240" text-anchor="middle" font-size="9" font-weight="600" fill="#C2410C">AudioSocket</text>
  <text x="970" y="254" text-anchor="middle" font-size="8" fill="#94A3B8">TCP :4573</text>

  <!-- Arrow down from channels -->
  <line x1="808" y1="268" x2="808" y2="280" stroke="#94A3B8" stroke-width="1.5" marker-end="url(#arrow-gray)"/>

  <!-- Row 2: Audio Input Processing -->
  <rect x="596" y="282" width="138" height="44" rx="6" fill="#FEF3C7" stroke="#F59E0B" stroke-width="1"/>
  <text x="665" y="300" text-anchor="middle" font-size="9.5" font-weight="600" fill="#92400E">Voice Activity</text>
  <text x="665" y="314" text-anchor="middle" font-size="9.5" font-weight="600" fill="#92400E">Detection (VAD)</text>

  <text x="740" y="308" text-anchor="middle" font-size="12" fill="#94A3B8">â†’</text>

  <rect x="748" y="282" width="138" height="44" rx="6" fill="#FEF3C7" stroke="#F59E0B" stroke-width="1"/>
  <text x="817" y="300" text-anchor="middle" font-size="9.5" font-weight="600" fill="#92400E">End-of-Speech</text>
  <text x="817" y="314" text-anchor="middle" font-size="9.5" font-weight="600" fill="#92400E">Detection</text>

  <text x="892" y="308" text-anchor="middle" font-size="12" fill="#94A3B8">â†’</text>

  <rect x="900" y="282" width="116" height="44" rx="6" fill="#FEF3C7" stroke="#F59E0B" stroke-width="1"/>
  <text x="958" y="300" text-anchor="middle" font-size="9.5" font-weight="600" fill="#92400E">Denoiser</text>
  <text x="958" y="314" text-anchor="middle" font-size="8" fill="#94A3B8">Noise Reduction</text>

  <!-- Arrow down -->
  <line x1="808" y1="326" x2="808" y2="340" stroke="#94A3B8" stroke-width="1.5" marker-end="url(#arrow-gray)"/>

  <!-- Row 3: STT -->
  <rect x="596" y="342" width="424" height="48" rx="6" fill="#DBEAFE" stroke="#3B82F6" stroke-width="1.5"/>
  <text x="808" y="363" text-anchor="middle" font-size="11" font-weight="700" fill="#1D4ED8">Speech-to-Text (STT) Transformer</text>
  <text x="808" y="380" text-anchor="middle" font-size="8.5" fill="#64748B">Deepgram Â· Google Â· Azure Â· AWS Â· AssemblyAI Â· Cartesia Â· Rev.ai Â· Sarvam Â· Speechmatics Â· OpenAI Whisper</text>

  <!-- Arrow down -->
  <line x1="808" y1="390" x2="808" y2="404" stroke="#94A3B8" stroke-width="1.5" marker-end="url(#arrow-gray)"/>

  <!-- Row 4: LLM Executor + Knowledge -->
  <rect x="596" y="406" width="260" height="56" rx="6" fill="#EDE9FE" stroke="#8B5CF6" stroke-width="1.5"/>
  <text x="726" y="428" text-anchor="middle" font-size="11" font-weight="700" fill="#6D28D9">LLM Executor</text>
  <text x="726" y="446" text-anchor="middle" font-size="8.5" fill="#64748B">â†’ integration-api (gRPC)</text>
  <text x="726" y="456" text-anchor="middle" font-size="8" fill="#8B5CF6">Chat + Tool Calls + Streaming</text>

  <rect x="866" y="406" width="150" height="56" rx="6" fill="#ECFDF5" stroke="#10B981" stroke-width="1.5"/>
  <text x="941" y="424" text-anchor="middle" font-size="10" font-weight="700" fill="#047857">Knowledge</text>
  <text x="941" y="440" text-anchor="middle" font-size="10" font-weight="700" fill="#047857">Retriever</text>
  <text x="941" y="456" text-anchor="middle" font-size="8" fill="#64748B">OpenSearch + Reranker</text>

  <!-- Arrow down -->
  <line x1="808" y1="462" x2="808" y2="474" stroke="#94A3B8" stroke-width="1.5" marker-end="url(#arrow-gray)"/>

  <!-- Row 5: Normalizer + Tool Executor -->
  <rect x="596" y="476" width="206" height="44" rx="6" fill="#F0FDF4" stroke="#22C55E" stroke-width="1"/>
  <text x="699" y="494" text-anchor="middle" font-size="9.5" font-weight="600" fill="#166534">Text Normalizer</text>
  <text x="699" y="508" text-anchor="middle" font-size="8" fill="#94A3B8">Currency Â· Date Â· URL Â· Numbers</text>

  <rect x="810" y="476" width="206" height="44" rx="6" fill="#FEF2F2" stroke="#EF4444" stroke-width="1"/>
  <text x="913" y="494" text-anchor="middle" font-size="9.5" font-weight="600" fill="#991B1B">Tool Executor</text>
  <text x="913" y="508" text-anchor="middle" font-size="8" fill="#94A3B8">â†’ endpoint-api (gRPC)</text>

  <!-- Arrow down -->
  <line x1="808" y1="520" x2="808" y2="534" stroke="#94A3B8" stroke-width="1.5" marker-end="url(#arrow-gray)"/>

  <!-- Row 6: TTS -->
  <rect x="596" y="536" width="424" height="48" rx="6" fill="#DBEAFE" stroke="#3B82F6" stroke-width="1.5"/>
  <text x="808" y="557" text-anchor="middle" font-size="11" font-weight="700" fill="#1D4ED8">Text-to-Speech (TTS) Transformer</text>
  <text x="808" y="574" text-anchor="middle" font-size="8.5" fill="#64748B">ElevenLabs Â· Deepgram Â· Google Â· Azure Â· AWS Polly Â· Cartesia Â· OpenAI Â· Resemble Â· Sarvam</text>

  <!-- Arrow down -->
  <line x1="808" y1="584" x2="808" y2="598" stroke="#94A3B8" stroke-width="1.5" marker-end="url(#arrow-gray)"/>

  <!-- Row 7: Output -->
  <rect x="596" y="600" width="206" height="44" rx="6" fill="#F8FAFC" stroke="#94A3B8" stroke-width="1"/>
  <text x="699" y="618" text-anchor="middle" font-size="9.5" font-weight="600" fill="#475569">Audio Recorder</text>
  <text x="699" y="632" text-anchor="middle" font-size="8" fill="#94A3B8">S3 / CDN Capture</text>

  <rect x="810" y="600" width="206" height="44" rx="6" fill="#F8FAFC" stroke="#94A3B8" stroke-width="1"/>
  <text x="913" y="618" text-anchor="middle" font-size="9.5" font-weight="600" fill="#475569">Telemetry</text>
  <text x="913" y="632" text-anchor="middle" font-size="8" fill="#94A3B8">OpenTelemetry Tracing</text>

  <!-- Row 8: Supporting modules -->
  <rect x="596" y="654" width="138" height="36" rx="6" fill="#FFF1F2" stroke="#FDA4AF" stroke-width="1"/>
  <text x="665" y="676" text-anchor="middle" font-size="9" font-weight="600" fill="#9F1239">Webhooks</text>

  <rect x="740" y="654" width="138" height="36" rx="6" fill="#F0F9FF" stroke="#7DD3FC" stroke-width="1"/>
  <text x="809" y="676" text-anchor="middle" font-size="9" font-weight="600" fill="#0369A1">Conversations</text>

  <rect x="884" y="654" width="132" height="36" rx="6" fill="#FEFCE8" stroke="#FDE047" stroke-width="1"/>
  <text x="950" y="676" text-anchor="middle" font-size="9" font-weight="600" fill="#854D0E">Deployments</text>

  <text x="808" y="706" text-anchor="middle" font-size="8" fill="#94A3B8">API Â· Debugger Â· Phone Â· Web Plugin Â· WhatsApp</text>

  <!-- ==================== INFRASTRUCTURE (Bottom-Center) ==================== -->
  <rect x="350" y="738" width="700" height="92" rx="10" fill="#F8FAFC" stroke="#E2E8F0" stroke-width="1"/>
  <text x="700" y="756" text-anchor="middle" font-size="10" font-weight="600" fill="#94A3B8" letter-spacing="1">INFRASTRUCTURE</text>

  <!-- PostgreSQL -->
  <rect x="366" y="766" width="175" height="54" rx="6" fill="#FFFFFF" stroke="#64748B" stroke-width="1.5" filter="url(#shadow)"/>
  <text x="454" y="785" text-anchor="middle" font-size="10" font-weight="600" fill="#334155">PostgreSQL 15</text>
  <text x="454" y="798" text-anchor="middle" font-size="8" fill="#94A3B8">:5432 Â· GORM ORM</text>
  <text x="454" y="811" text-anchor="middle" font-size="7.5" fill="#64748B">web_db Â· assistant_db Â· integration_db Â· endpoint_db</text>

  <!-- Redis -->
  <rect x="553" y="766" width="155" height="54" rx="6" fill="#FFFFFF" stroke="#EF4444" stroke-width="1.5" filter="url(#shadow)"/>
  <text x="631" y="785" text-anchor="middle" font-size="10" font-weight="600" fill="#DC2626">Redis 7</text>
  <text x="631" y="798" text-anchor="middle" font-size="8" fill="#94A3B8">:6379</text>
  <text x="631" y="811" text-anchor="middle" font-size="7.5" fill="#64748B">Cache Â· Pub/Sub Â· Celery Â· GORM L2</text>

  <!-- OpenSearch -->
  <rect x="720" y="766" width="155" height="54" rx="6" fill="#FFFFFF" stroke="#F59E0B" stroke-width="1.5" filter="url(#shadow)" stroke-dasharray="4 2"/>
  <text x="798" y="785" text-anchor="middle" font-size="10" font-weight="600" fill="#B45309">OpenSearch 2.11</text>
  <text x="798" y="798" text-anchor="middle" font-size="8" fill="#94A3B8">:9200 Â· Optional</text>
  <text x="798" y="811" text-anchor="middle" font-size="7.5" fill="#64748B">Tenant-Scoped Knowledge Search</text>

  <!-- S3 / CDN -->
  <rect x="887" y="766" width="148" height="54" rx="6" fill="#FFFFFF" stroke="#64748B" stroke-width="1.5" filter="url(#shadow)"/>
  <text x="961" y="785" text-anchor="middle" font-size="10" font-weight="600" fill="#334155">S3 / CDN</text>
  <text x="961" y="798" text-anchor="middle" font-size="8" fill="#94A3B8">File Storage</text>
  <text x="961" y="811" text-anchor="middle" font-size="7.5" fill="#64748B">Assets Â· Recordings Â· Documents</text>

  <!-- ==================== EXTERNAL INTEGRATIONS (Right Zone) ==================== -->
  <rect x="1070" y="84" width="222" height="746" rx="10" fill="#F8FAFC" stroke="#E2E8F0" stroke-width="1"/>

  <!-- LLM Providers -->
  <text x="1181" y="108" text-anchor="middle" font-size="10" font-weight="600" fill="#6D28D9" letter-spacing="0.5">LLM PROVIDERS</text>
  <rect x="1084" y="116" width="194" height="190" rx="6" fill="#FFFFFF" stroke="#8B5CF6" stroke-width="1.5" filter="url(#shadow)"/>
  <text x="1100" y="136" font-size="9" fill="#475569">â¬¡ OpenAI</text>
  <text x="1100" y="152" font-size="9" fill="#475569">â¬¡ Anthropic (Claude)</text>
  <text x="1100" y="168" font-size="9" fill="#475569">â¬¡ Google Gemini</text>
  <text x="1100" y="184" font-size="9" fill="#475569">â¬¡ Azure OpenAI</text>
  <text x="1100" y="200" font-size="9" fill="#475569">â¬¡ Cohere</text>
  <text x="1100" y="216" font-size="9" fill="#475569">â¬¡ Mistral</text>
  <text x="1100" y="232" font-size="9" fill="#475569">â¬¡ Vertex AI</text>
  <text x="1100" y="248" font-size="9" fill="#475569">â¬¡ HuggingFace</text>
  <text x="1100" y="264" font-size="9" fill="#475569">â¬¡ Replicate</text>
  <text x="1100" y="280" font-size="9" fill="#475569">â¬¡ Voyage AI</text>
  <text x="1181" y="298" text-anchor="middle" font-size="7.5" fill="#8B5CF6">Chat Â· Embedding Â· Reranking</text>

  <!-- STT Providers -->
  <text x="1181" y="326" text-anchor="middle" font-size="10" font-weight="600" fill="#1D4ED8" letter-spacing="0.5">STT PROVIDERS</text>
  <rect x="1084" y="334" width="194" height="124" rx="6" fill="#FFFFFF" stroke="#3B82F6" stroke-width="1.5" filter="url(#shadow)"/>
  <text x="1100" y="354" font-size="9" fill="#475569">ðŸŽ™ Deepgram</text>
  <text x="1100" y="370" font-size="9" fill="#475569">ðŸŽ™ Google Cloud Speech</text>
  <text x="1100" y="386" font-size="9" fill="#475569">ðŸŽ™ Azure Cognitive</text>
  <text x="1100" y="402" font-size="9" fill="#475569">ðŸŽ™ AWS Transcribe</text>
  <text x="1100" y="418" font-size="9" fill="#475569">ðŸŽ™ AssemblyAI Â· Rev.ai</text>
  <text x="1100" y="434" font-size="9" fill="#475569">ðŸŽ™ Cartesia Â· Sarvam</text>
  <text x="1100" y="450" font-size="9" fill="#475569">ðŸŽ™ Speechmatics Â· OpenAI</text>

  <!-- TTS Providers -->
  <text x="1181" y="478" text-anchor="middle" font-size="10" font-weight="600" fill="#1D4ED8" letter-spacing="0.5">TTS PROVIDERS</text>
  <rect x="1084" y="486" width="194" height="110" rx="6" fill="#FFFFFF" stroke="#3B82F6" stroke-width="1.5" filter="url(#shadow)"/>
  <text x="1100" y="506" font-size="9" fill="#475569">ðŸ”Š ElevenLabs</text>
  <text x="1100" y="522" font-size="9" fill="#475569">ðŸ”Š Deepgram</text>
  <text x="1100" y="538" font-size="9" fill="#475569">ðŸ”Š Google Â· Azure Â· AWS Polly</text>
  <text x="1100" y="554" font-size="9" fill="#475569">ðŸ”Š Cartesia Â· OpenAI</text>
  <text x="1100" y="570" font-size="9" fill="#475569">ðŸ”Š Resemble Â· Sarvam</text>
  <text x="1181" y="590" text-anchor="middle" font-size="7.5" fill="#3B82F6">Streaming Audio Synthesis</text>

  <!-- OAuth Providers -->
  <text x="1181" y="618" text-anchor="middle" font-size="10" font-weight="600" fill="#059669" letter-spacing="0.5">OAUTH PROVIDERS</text>
  <rect x="1084" y="626" width="194" height="78" rx="6" fill="#FFFFFF" stroke="#10B981" stroke-width="1.5" filter="url(#shadow)"/>
  <text x="1100" y="646" font-size="9" fill="#475569">ðŸ”— Google Â· GitHub Â· GitLab</text>
  <text x="1100" y="662" font-size="9" fill="#475569">ðŸ”— Microsoft Â· Atlassian</text>
  <text x="1100" y="678" font-size="9" fill="#475569">ðŸ”— HubSpot Â· LinkedIn</text>
  <text x="1100" y="694" font-size="9" fill="#475569">ðŸ”— Notion Â· Slack</text>

  <!-- Email & Telephony -->
  <text x="1181" y="722" text-anchor="middle" font-size="10" font-weight="600" fill="#334155" letter-spacing="0.5">MESSAGING &amp; TELEPHONY</text>
  <rect x="1084" y="730" width="194" height="64" rx="6" fill="#FFFFFF" stroke="#64748B" stroke-width="1.5" filter="url(#shadow)"/>
  <text x="1100" y="750" font-size="9" fill="#475569">âœ‰ SendGrid Â· AWS SES</text>
  <text x="1100" y="766" font-size="9" fill="#475569">ðŸ“ž SIP Trunks (Twilio, etc.)</text>
  <text x="1100" y="782" font-size="9" fill="#475569">ðŸ’¬ WhatsApp Business API</text>

  <!-- ==================== CONNECTION ARROWS ==================== -->

  <!-- Clients â†’ Nginx -->
  <line x1="148" y1="126" x2="194" y2="160" stroke="#94A3B8" stroke-width="1.2" marker-end="url(#arrow-gray)"/>
  <line x1="148" y1="190" x2="194" y2="180" stroke="#94A3B8" stroke-width="1.2" marker-end="url(#arrow-gray)"/>
  <line x1="148" y1="248" x2="194" y2="200" stroke="#94A3B8" stroke-width="1.2" marker-end="url(#arrow-gray)"/>
  <line x1="148" y1="306" x2="194" y2="220" stroke="#94A3B8" stroke-width="1.2" marker-end="url(#arrow-gray)"/>
  <line x1="148" y1="368" x2="194" y2="240" stroke="#94A3B8" stroke-width="1.2" marker-end="url(#arrow-gray)"/>
  <line x1="148" y1="644" x2="194" y2="260" stroke="#94A3B8" stroke-width="1" stroke-dasharray="3 3"/>

  <!-- Phone â†’ assistant-api (SIP direct bypass) -->
  <path d="M148,444 Q170,444 170,500 Q170,660 580,450" fill="none" stroke="#F59E0B" stroke-width="1.3" stroke-dasharray="4 2" marker-end="url(#arrow-gray)"/>
  <text x="220" y="494" font-size="7.5" fill="#B45309" transform="rotate(-20 220 494)">SIP :5090</text>

  <!-- Asterisk â†’ assistant-api (AudioSocket direct) -->
  <path d="M148,512 Q170,512 170,550 Q170,680 580,500" fill="none" stroke="#F59E0B" stroke-width="1.3" stroke-dasharray="4 2" marker-end="url(#arrow-gray)"/>
  <text x="220" y="562" font-size="7.5" fill="#B45309" transform="rotate(-15 220 562)">AudioSocket :4573</text>

  <!-- Nginx â†’ web-api -->
  <line x1="322" y1="165" x2="366" y2="165" stroke="#3B82F6" stroke-width="1.5" marker-end="url(#arrow-blue)"/>
  <text x="344" y="158" text-anchor="middle" font-size="7" fill="#3B82F6">REST</text>

  <!-- Nginx â†’ assistant-api -->
  <line x1="322" y1="220" x2="580" y2="220" stroke="#3B82F6" stroke-width="1.5" marker-end="url(#arrow-blue)"/>
  <text x="450" y="215" text-anchor="middle" font-size="7" fill="#3B82F6">WS / gRPC-Web / WebRTC</text>

  <!-- web-api â†’ integration-api (proxy) -->
  <line x1="463" y1="270" x2="463" y2="290" stroke="#94A3B8" stroke-width="1" stroke-dasharray="3 2" marker-end="url(#arrow-gray)"/>

  <!-- web-api â†’ endpoint-api (proxy) -->
  <path d="M440,270 L440,480" fill="none" stroke="#94A3B8" stroke-width="1" stroke-dasharray="3 2" marker-end="url(#arrow-gray)"/>
  <text x="432" y="380" font-size="7" fill="#94A3B8" transform="rotate(-90 432 380)">proxy</text>

  <!-- assistant-api â†’ integration-api (gRPC) -->
  <line x1="596" y1="434" x2="560" y2="375" stroke="#8B5CF6" stroke-width="1.5" marker-end="url(#arrow-purple)"/>
  <text x="570" y="395" text-anchor="middle" font-size="7" fill="#8B5CF6">gRPC</text>

  <!-- assistant-api â†’ endpoint-api (gRPC) -->
  <line x1="810" y1="520" x2="560" y2="540" stroke="#8B5CF6" stroke-width="1.2" marker-end="url(#arrow-purple)"/>
  <text x="680" y="535" text-anchor="middle" font-size="7" fill="#8B5CF6">gRPC</text>

  <!-- assistant-api â†’ web-api (auth gRPC) -->
  <path d="M596,170 Q570,170 570,150 Q570,130 560,130" fill="none" stroke="#8B5CF6" stroke-width="1" stroke-dasharray="3 2" marker-end="url(#arrow-purple)"/>
  <text x="575" y="142" font-size="7" fill="#8B5CF6">auth</text>

  <!-- Services â†’ PostgreSQL -->
  <line x1="463" y1="620" x2="454" y2="766" stroke="#64748B" stroke-width="1" stroke-dasharray="3 2" marker-end="url(#arrow-slate)"/>
  <line x1="808" y1="714" x2="630" y2="766" stroke="#64748B" stroke-width="1" stroke-dasharray="3 2" marker-end="url(#arrow-slate)"/>

  <!-- Services â†’ Redis -->
  <line x1="700" y1="735" x2="631" y2="766" stroke="#EF4444" stroke-width="1" stroke-dasharray="3 2"/>

  <!-- Services â†’ OpenSearch -->
  <line x1="941" y1="462" x2="1000" y2="700" stroke="#F59E0B" stroke-width="1" stroke-dasharray="3 2"/>
  <path d="M1000,700 L900,766" fill="none" stroke="#F59E0B" stroke-width="1" stroke-dasharray="3 2" marker-end="url(#arrow-gray)"/>

  <!-- Services â†’ S3 -->
  <line x1="913" y1="644" x2="961" y2="766" stroke="#64748B" stroke-width="1" stroke-dasharray="3 2" marker-end="url(#arrow-slate)"/>

  <!-- integration-api â†’ LLM Providers -->
  <line x1="560" y1="375" x2="1084" y2="220" stroke="#8B5CF6" stroke-width="1.3" marker-end="url(#arrow-purple)"/>
  <text x="820" y="288" text-anchor="middle" font-size="7" fill="#8B5CF6" transform="rotate(-12 820 288)">Provider API calls</text>

  <!-- assistant-api â†’ STT Providers -->
  <line x1="1020" y1="366" x2="1084" y2="380" stroke="#3B82F6" stroke-width="1.3" marker-end="url(#arrow-blue)"/>

  <!-- assistant-api â†’ TTS Providers -->
  <line x1="1020" y1="560" x2="1084" y2="540" stroke="#3B82F6" stroke-width="1.3" marker-end="url(#arrow-blue)"/>

  <!-- web-api â†’ OAuth Providers -->
  <path d="M560,200 Q1050,200 1050,660 L1084,660" fill="none" stroke="#10B981" stroke-width="1.2" marker-end="url(#arrow-gray)"/>
  <text x="980" y="400" font-size="7" fill="#10B981" transform="rotate(90 980 400)">OAuth</text>

  <!-- ==================== LEGEND ==================== -->
  <rect x="1310" y="84" width="222" height="746" rx="10" fill="#FAFAFA" stroke="#E2E8F0" stroke-width="1"/>
  <text x="1421" y="108" text-anchor="middle" font-size="10" font-weight="600" fill="#94A3B8" letter-spacing="1">PROTOCOL LEGEND</text>

  <!-- Protocol Lines Legend -->
  <line x1="1326" y1="126" x2="1366" y2="126" stroke="#3B82F6" stroke-width="1.5"/>
  <text x="1376" y="130" font-size="9" fill="#475569">REST / HTTP</text>

  <line x1="1326" y1="148" x2="1366" y2="148" stroke="#8B5CF6" stroke-width="1.5"/>
  <text x="1376" y="152" font-size="9" fill="#475569">gRPC (inter-service)</text>

  <line x1="1326" y1="170" x2="1366" y2="170" stroke="#F59E0B" stroke-width="1.5" stroke-dasharray="4 2"/>
  <text x="1376" y="174" font-size="9" fill="#475569">SIP / AudioSocket</text>

  <line x1="1326" y1="192" x2="1366" y2="192" stroke="#94A3B8" stroke-width="1.5" stroke-dasharray="3 2"/>
  <text x="1376" y="196" font-size="9" fill="#475569">Database / Cache</text>

  <line x1="1326" y1="214" x2="1366" y2="214" stroke="#94A3B8" stroke-width="1.2"/>
  <text x="1376" y="218" font-size="9" fill="#475569">Client Connection</text>

  <!-- Service Type Legend -->
  <text x="1421" y="248" text-anchor="middle" font-size="10" font-weight="600" fill="#94A3B8" letter-spacing="1">SERVICE TYPES</text>

  <rect x="1326" y="260" width="16" height="12" rx="3" fill="#EFF6FF" stroke="#3B82F6" stroke-width="1"/>
  <text x="1352" y="270" font-size="9" fill="#475569">Go Service</text>

  <rect x="1326" y="282" width="16" height="12" rx="3" fill="#ECFDF5" stroke="#10B981" stroke-width="1"/>
  <text x="1352" y="292" font-size="9" fill="#475569">Python Service</text>

  <rect x="1326" y="304" width="16" height="12" rx="3" fill="#F0F9FF" stroke="#06B6D4" stroke-width="1"/>
  <text x="1352" y="314" font-size="9" fill="#475569">React / TypeScript</text>

  <rect x="1326" y="326" width="16" height="12" rx="3" fill="#FFF7ED" stroke="#FB923C" stroke-width="1"/>
  <text x="1352" y="336" font-size="9" fill="#475569">Communication Channel</text>

  <rect x="1326" y="348" width="16" height="12" rx="3" fill="#FEF3C7" stroke="#F59E0B" stroke-width="1"/>
  <text x="1352" y="358" font-size="9" fill="#475569">Audio Processing</text>

  <rect x="1326" y="370" width="16" height="12" rx="3" fill="#EDE9FE" stroke="#8B5CF6" stroke-width="1"/>
  <text x="1352" y="380" font-size="9" fill="#475569">AI / LLM</text>

  <rect x="1326" y="392" width="16" height="12" rx="3" fill="#DBEAFE" stroke="#3B82F6" stroke-width="1"/>
  <text x="1352" y="402" font-size="9" fill="#475569">Speech Transformer</text>

  <rect x="1326" y="414" width="16" height="12" rx="3" fill="#FFFFFF" stroke="#64748B" stroke-width="1"/>
  <text x="1352" y="424" font-size="9" fill="#475569">Infrastructure</text>

  <rect x="1326" y="436" width="16" height="12" rx="3" fill="#FFFFFF" stroke="#F59E0B" stroke-width="1" stroke-dasharray="3 1"/>
  <text x="1352" y="446" font-size="9" fill="#475569">Optional Component</text>

  <!-- Architecture Highlights -->
  <text x="1421" y="478" text-anchor="middle" font-size="10" font-weight="600" fill="#94A3B8" letter-spacing="1">KEY FEATURES</text>

  <text x="1326" y="498" font-size="8.5" fill="#475569" font-weight="600">Single-Port Multiplexing (cmux)</text>
  <text x="1326" y="512" font-size="8" fill="#94A3B8">HTTP/2 + gRPC-Web + HTTP on one port</text>

  <text x="1326" y="534" font-size="8.5" fill="#475569" font-weight="600">Real-Time Voice Pipeline</text>
  <text x="1326" y="548" font-size="8" fill="#94A3B8">VAD â†’ STT â†’ LLM â†’ TTS streaming</text>

  <text x="1326" y="570" font-size="8.5" fill="#475569" font-weight="600">Multi-Channel Delivery</text>
  <text x="1326" y="584" font-size="8" fill="#94A3B8">WebRTC Â· SIP Â· AudioSocket Â· gRPC</text>

  <text x="1326" y="606" font-size="8.5" fill="#475569" font-weight="600">Provider Abstraction</text>
  <text x="1326" y="620" font-size="8" fill="#94A3B8">10+ LLM Â· 12 STT/TTS Â· 9 OAuth</text>

  <text x="1326" y="642" font-size="8.5" fill="#475569" font-weight="600">Knowledge-Augmented (RAG)</text>
  <text x="1326" y="656" font-size="8" fill="#94A3B8">OpenSearch + embedding + reranking</text>

  <text x="1326" y="678" font-size="8.5" fill="#475569" font-weight="600">Microservice Isolation</text>
  <text x="1326" y="692" font-size="8" fill="#94A3B8">Per-service DB Â· gRPC inter-service</text>

  <text x="1326" y="714" font-size="8.5" fill="#475569" font-weight="600">Multi-Tenant Architecture</text>
  <text x="1326" y="728" font-size="8" fill="#94A3B8">Org + Project scoped entities</text>

  <text x="1326" y="750" font-size="8.5" fill="#475569" font-weight="600">Graceful Lifecycle</text>
  <text x="1326" y="764" font-size="8" fill="#94A3B8">Health probes Â· errgroup Â· signal handler</text>

  <text x="1326" y="786" font-size="8.5" fill="#475569" font-weight="600">Client SDKs</text>
  <text x="1326" y="800" font-size="8" fill="#94A3B8">Go Â· Node.js Â· Python Â· React</text>

  <!-- ==================== FOOTER ==================== -->
  <rect x="0" y="1044" width="1920" height="36" fill="#F8FAFC"/>
  <line x1="0" y1="1044" x2="1920" y2="1044" stroke="#E2E8F0" stroke-width="1"/>
  <text x="960" y="1066" text-anchor="middle" font-size="10" fill="#94A3B8">Rapida Voice AI Platform Â· github.com/rapidaai Â· Go 1.25 Â· Docker Compose Orchestration Â· Open Source</text>

  <!-- Data Flow Arrows Label -->
  <text x="1560" y="862" text-anchor="middle" font-size="9" font-weight="600" fill="#94A3B8" letter-spacing="0.5">DATA FLOW</text>
  <text x="1560" y="880" text-anchor="middle" font-size="8" fill="#94A3B8">Browser â†’ Nginx â†’ web-api (auth)</text>
  <text x="1560" y="894" text-anchor="middle" font-size="8" fill="#94A3B8">â†’ assistant-api (voice pipeline)</text>
  <text x="1560" y="908" text-anchor="middle" font-size="8" fill="#94A3B8">â†’ integration-api (LLM inference)</text>
  <text x="1560" y="922" text-anchor="middle" font-size="8" fill="#94A3B8">â†’ endpoint-api (tool execution)</text>
  <text x="1560" y="936" text-anchor="middle" font-size="8" fill="#94A3B8">â†’ document-api (RAG indexing)</text>

  <!-- Port Summary -->
  <rect x="1320" y="950" width="480" height="84" rx="8" fill="#FFFFFF" stroke="#E2E8F0" stroke-width="1" filter="url(#shadow)"/>
  <text x="1560" y="970" text-anchor="middle" font-size="9" font-weight="600" fill="#475569">PORT MAP</text>
  <text x="1340" y="988" font-size="8" fill="#64748B">Nginx :8080 Â· web-api :9001 Â· integration-api :9004 Â· endpoint-api :9005</text>
  <text x="1340" y="1002" font-size="8" fill="#64748B">assistant-api :9007 (HTTP/gRPC) Â· :5090 (SIP) Â· :4573 (AudioSocket) Â· :10000-10199 (RTP)</text>
  <text x="1340" y="1016" font-size="8" fill="#64748B">document-api :9010 Â· PostgreSQL :5432 Â· Redis :6379 Â· OpenSearch :9200 Â· UI :3000</text>
  <text x="1340" y="1030" font-size="8" fill="#3B82F6">Up to 100 concurrent SIP calls (RTP port range)</text>

</svg>