service_name: "Document API"
host: "0.0.0.0"
port: 9010

authentication_config:
  strict: false
  type: "jwt"
  config:
    secret_key: "rpd_pks"

elastic_search:
  host: "opensearch"
  port: 9200
  scheme: "http"
  max_connection: 5

postgres:
  host: "postgres"
  port: 5432
  auth:
    password: "rapida_db_password"
    user: "rapida_user"
  db: "assistant_db"
  max_connection: 10
  ideal_connection: 5

internal_service:
  web_host: "web-api:9001"
  integration_host: "integration-api:9004"
  endpoint_host: "endpoint-api:9005"
  assistant_host: "assistant-api:9007"

storage:
  storage_type: "local"
  storage_path_prefix: "/opt/apps/assets"

knowledge_extractor_config:
  chunking_technique:
    chunker: app.core.chunkers.statistical_chunker.StatisticalChunker
    options:
      encoder: "app.core.encoders.openai_encoder.OpenaiEncoder"
      options:
        model_name: "text-embedding-3-large"
        api_key: "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"
      splitter: "app.core.splitter.sentence_splitter.SpacySentenceSplitter"
      threshold_adjustment: 0.01
      dynamic_threshold: true
      window_size: 5
      min_split_tokens: 100
      max_split_tokens: 700
      split_tokens_tolerance: 10
      plot_chunks: false
      enable_statistics: false
  transformers:
    - transformer: app.core.transformers.entity_document_transformer.EntityDocumentTransformer
      stage: "post"
      options:
        entity_extractor: app.core.rag.extractor.entities.spacy_entity_extractor.SpacyEntityExtractor
        options:
          entities:
            [
              "organizations",
              "dates",
              "products",
              "events",
              "people",
              "times",
              "quantities",
            ]
  file_extensions:
    - extension: ".xlsx"
      extractor: app.core.rag.extractor.documents.excel_extractor.ExcelExtractor
    - extension: ".xls"
      extractor: app.core.rag.extractor.documents.excel_extractor.ExcelExtractor
    - extension: ".docx"
      extractor: app.core.rag.extractor.documents.word_extractor.WordExtractor
    - extension: ".pdf"
      extractor: app.core.rag.extractor.documents.unstructured.unstructured_pdf_extractor.UnstructuredPDFExtractor
    #    extractor: app.core.rag.extractor.documents.openparse.openparse_pdf_extractor.OpenparsePDFExtractor
    #    extractor: app.core.rag.extractor.documents.unstructured.unstructured_pdf_extractor.UnstructuredPDFExtractor
    #    extractor: app.core.rag.extractor.documents.pdf_extractor.PdfExtractor
    - extension: ".md"
      extractor: app.core.rag.extractor.documents.markdown_extractor.MarkdownExtractor
      options:
        autodetect_encoding: true
    - extension: ".markdown"
      extractor: app.core.rag.extractor.documents.markdown_extractor.MarkdownExtractor
      options:
        autodetect_encoding: true
    - extension: ".htm"
      extractor: app.core.rag.extractor.documents.html_extractor.HtmlExtractor
    - extension: ".html"
      extractor: app.core.rag.extractor.documents.html_extractor.HtmlExtractor
    - extension: ".csv"
      extractor: app.core.rag.extractor.documents.csv_extractor.CSVExtractor
      options:
        autodetect_encoding: true
    - extension: ".doc"
      extractor: app.core.rag.extractor.documents.unstructured.unstructured_doc_extractor.UnstructuredWordExtractor
    - extension: ".ppt"
      extractor: app.core.rag.extractor.documents.pptx_extractor.PowerPointExtractor
    - extension: ".pptx"
      extractor: app.core.rag.extractor.documents.pptx_extractor.PowerPointExtractor
    - extension: ".msg"
      extractor: app.core.rag.extractor.documents.unstructured.unstructured_msg_extractor.UnstructuredMsgExtractor
      options:
        autodetect_encoding: true
        api_url: https://rapidaai-8ry58hkr.api.unstructuredapp.io
        api_key: OnNIS6LqeSJSxLhb8meqBcFktDZ7pi
    - extension: ".eml"
      extractor: app.core.rag.extractor.documents.unstructured.unstructured_email_extractor.UnstructuredEmailExtractor
      options:
        api_url: https://rapidaai-8ry58hkr.api.unstructuredapp.io
        api_key: OnNIS6LqeSJSxLhb8meqBcFktDZ7pi
        autodetect_encoding: true
    - extension: "*"
      extractor: app.core.rag.extractor.documents.unstructured.unstructured_text_extractor.UnstructuredTextExtractor
      options:
        api_url: https://rapidaai-8ry58hkr.api.unstructuredapp.io
        api_key: OnNIS6LqeSJSxLhb8meqBcFktDZ7pi
        autodetect_encoding: true
